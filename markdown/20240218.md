---
Title: 由 scrum2 寫在個人倉儲的網誌
Date: 2024-02-18 11:00
Category: scrum2
Tags: combined_directory, w1
Slug: scrum2_cd2024_2024-Spring-w1-blog-tutorial
Author: scrum2
---

2024 Spring 網際內容管理與協同產品設計實習課程教學導引.

<!-- PELICAN_END_SUMMARY -->

# 如何整合各組員每週所寫的網誌
各組員個人倉儲中的相關設定, 由各組員自行處理, 但分組倉儲中的設定則經由討論後決定, 以下為設定範例, 目的在將各組員每週所編寫的網誌內容, 經由 Pelican 與程式方法設定, 整合至各分組網站中的 blog 目錄:

分組倉儲中的 pelicanconfig.py 設定範例:

<pre class="brush: python">
#!/usr/bin/env python
# -*- coding: utf-8 -*- #
from __future__ import unicode_literals

AUTHOR = 'KMOL'
SITENAME = '網際內容管理系統'
# 不要用文章所在目錄作為類別
USE_FOLDER_AS_CATEGORY = False

#PATH = 'markdown'

# 開始將組員的個別網誌目錄納入分組倉儲中
import os
import shutil

# Directories you want to include
input_directories = ['markdown', '41123199/markdown']

# Temporary directory to store combined Markdown files
combined_directory = 'combined_markdown'

# Create the combined directory if it doesn't exist
if not os.path.exists(combined_directory):
    os.makedirs(combined_directory)
else:
    # Clean the existing content of the combined directory
    for root, dirs, files in os.walk(combined_directory):
        for file in files:
            os.remove(os.path.join(root, file))
        for dir in dirs:
            shutil.rmtree(os.path.join(root, dir))

# Copy Markdown files from input directories to the combined directory
for directory in input_directories:
    for root, _, files in os.walk(directory):
        for file in files:
            if file.endswith('.md'):
                source_file = os.path.join(root, file)
                destination_file = os.path.join(combined_directory, file)
                shutil.copy(source_file, destination_file)

# Get the paths of the combined directories
combined_paths = os.path.abspath(combined_directory)

# Set the Pelican PATH to the combined directory
PATH = combined_paths

# 結束將組員的個別網誌目錄納入分組倉儲中

#IGNORE_FILES = ['*']

OUTPUT_PATH = 'blog'

TIMEZONE = 'Asia/Taipei'

DEFAULT_LANG = 'en'

# Feed generation is usually not desired when developing
FEED_ALL_ATOM = None
CATEGORY_FEED_ATOM = None
TRANSLATION_FEED_ATOM = None
AUTHOR_FEED_ATOM = None
AUTHOR_FEED_RSS = None

# Blogroll
LINKS = (('Nature', 'https://www.nature.com/'),
        ('Science', 'http://www.sciencemag.org/'),
        ('Sam Harris', 'https://www.samharris.org/'),
        ('Andreas Wagner', 'http://www.ieu.uzh.ch/wagner/'),
        ('American Scientist', 'https://www.americanscientist.org/'),
        ('Scientific American', 'https://www.scientificamerican.com/'),)

# Social widget
#SOCIAL = (('You can add links in your config file', '#'),('Another social link', '#'),)

DEFAULT_PAGINATION = 10

# Uncomment following line if you want document-relative URLs when developing
#RELATIVE_URLS = True

# 必須絕對目錄或相對於設定檔案所在目錄
PLUGIN_PATHS = ['plugin']
PLUGINS = ['summary', 'tipue_search', 'sitemap', 'neighbors']

# for sitemap plugin
SITEMAP = {
    'format': 'xml',
    'priorities': {
        'articles': 0.5,
        'indexes': 0.5,
        'pages': 0.5
    },
    'changefreqs': {
        'articles': 'monthly',
        'indexes': 'daily',
        'pages': 'monthly'
    }
}

# search is for Tipue search
DIRECT_TEMPLATES = (('index', 'tags', 'categories', 'authors', 'archives', 'search'))

# for pelican-bootstrap3 theme settings
#TAG_CLOUD_MAX_ITEMS = 50
DISPLAY_CATEGORIES_ON_SIDEBAR = True
DISPLAY_RECENT_POSTS_ON_SIDEBAR = True
DISPLAY_TAGS_ON_SIDEBAR = True
DISPLAY_TAGS_INLINE = True
TAGS_URL = "tags.html"
CATEGORIES_URL = "categories.html"
#MENUITEMS = [('About', '/blog/pages/about/index.html')]
#SHOW_ARTICLE_AUTHOR = True

#MENUITEMS = [('Home', '/'), ('Archives', '/archives.html'), ('Search', '/search.html')]
# try to avoid "WARNING: Watched path does not exist " error
STATIC_PATHS = []
</pre>

完成此一設定後, 在分組倉儲中利用 Pelican 轉檔的指令為 pelican -s local_publishconf.py, 表示 markdown 目錄的來源將由 pelicanconf.py 中的 PATH 變數設定, 且過程中是採轉檔當下各組員子模組網站中的 markdown 目錄中的網誌進行轉檔, 各組員可以自行決定是否更新自己子模組在分組倉儲中的版本.